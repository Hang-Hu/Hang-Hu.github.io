<h2 id="reason">Reason</h2>

<p>Column <code class="highlighter-rouge">leader</code> is mapped twice, the first time is referenced by <code class="highlighter-rouge">property</code>, the second is by <code class="highlighter-rouge">many-to-one</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;property name="leader" column="leader"/&gt;
&lt;many-to-one name="studentByLeader" class="com.general.dao.entity.StudentEntity"&gt;
    &lt;column name="leader"/&gt;
&lt;/many-to-one&gt;
</code></pre>
</div>

<p>It’s ok to poplate one column to both <code class="highlighter-rouge">Integer leader</code> and <code class="highlighter-rouge">StudentEntity studentByLeader</code>. However, when TeamEntity’s private leader which is actually user_id and studentByLeader’s private user which is also user_id are both changed, which will be persist? Then you have to tell hibernate by config.</p>

<h2 id="solution1-delete-field">Solution1-delete field</h2>

<p>Why do you need two properties mapped to the same column in the first place? If you need access to the leader, you can probably remove the leader property and instead do</p>

<div class="highlighter-rouge"><pre class="highlight"><code>teamEntity.getStudentByLeader().getUser()
</code></pre>
</div>

<h2 id="solution2-map-with-insertfalse-updatefalse">Solution2-map with insert=”false” update=”false”</h2>

<p><code class="highlighter-rouge">Property</code> lose the right to persist.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;property name="leader" column="leader" insert="false" update="false"/&gt;
&lt;many-to-one name="studentByLeader" class="com.general.dao.entity.StudentEntity"&gt;
    &lt;column name="leader"/&gt;
&lt;/many-to-one&gt;
</code></pre>
</div>

<h3 id="for-id-who-dont-have-insert-and-update">For id who don’t have insert and update</h3>

<p>Do it in <code class="highlighter-rouge">many-to-one</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;id name="id" column="question"/&gt;
&lt;many-to-one name="questionByQuestion" class="com.general.dao.entity.QuestionEntity"
             insert="false" update="false"&gt;
    &lt;column name="question"/&gt;
&lt;/many-to-one&gt;
</code></pre>
</div>

<h2 id="annotation">Annotation</h2>

<p><code class="highlighter-rouge">Property</code> lose the ability to persist. Change it from:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>@Basic
@Column(name = "username")
public String getUsername() {
    return username;
}
</code></pre>
</div>

<p>To:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>@Basic
@Column(name = "username", insertable = false, updatable = false)
public String getUsername() {
    return username;
}
</code></pre>
</div>
