<h3 id="mvc">MVC</h3>

<p><img src="/home/joanna/Pictures/CodePic/SpringMVC/mvc.png" width="100%" /></p>
<h3 id="spring-mvc">Spring MVC</h3>

<p><img src="/home/joanna/Pictures/CodePic/SpringMVC/springmvc.png" width="100%" /></p>
<h3 id="jar-of-spring-mvc">jar of Spring mvc</h3>

<p><img src="/home/joanna/Pictures/CodePic/SpringMVC/springmvc-detail.png" width="100%" /></p>

<div class="highlighter-rouge"><pre class="highlight"><code>spring-webmvc-3.2.0.RELEASE
</code></pre>
</div>

<h3 id="configure-webxml-for-dispatcherservlet-and-springmvcxml">Configure web.xml for DispatcherServlet and springmvc.xml</h3>

<p>ctrl+shift+T, type DispatcherServlet, enter and then copy the full name.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>  &lt;servlet&gt;
  	&lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;
  	&lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
  	&lt;init-param&gt;
  		&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
  		&lt;param-value&gt;classpath:springmvc.xml&lt;/param-value&gt;
  	&lt;/init-param&gt;
  &lt;/servlet&gt;
&lt;servlet-mapping&gt;
	&lt;servlet-name&gt;springmvc&lt;/servlet-name&gt;
	&lt;url-pattern&gt;*.do&lt;/url-pattern&gt;
&lt;/servlet-mapping&gt;
</code></pre>
</div>

<blockquote>
  <p>Note that <code class="highlighter-rouge">init-param</code> for configuring <code class="highlighter-rouge">springmvc.xml</code> can be deleted if there is a <code class="highlighter-rouge">springmvc-servlet.xml</code> in <code class="highlighter-rouge">WEB-INF</code>.</p>
</blockquote>

<h3 id="configure-spring">Configure Spring</h3>

<p>Create source folder named <code class="highlighter-rouge">config</code>, create springmvc.xml in it.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="nt">&lt;beans</span> <span class="na">xmlns=</span><span class="s">"http://www.springframework.org/schema/beans"</span>
	<span class="na">xmlns:mvc=</span><span class="s">"http://www.springframework.org/schema/mvc"</span> <span class="na">xmlns:context=</span><span class="s">"http://www.springframework.org/schema/context"</span>
	<span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="na">xmlns:aop=</span><span class="s">"http://www.springfeamework.org/schema/aop"</span> 
	<span class="na">xmlns:tx=</span><span class="s">"http://springframework.org/schema/tx"</span>
	<span class="na">xsi:schemaLocation=</span><span class="s">"</span>
        <span class="err">http://www.springframework.org/schema/beans</span>     
        <span class="err">http://www.springframework.org/schema/beans/spring-beans.xsd</span>
        <span class="err">http://www.springframework.org/schema/mvc</span> 
        <span class="err">http://www.springframework.org/schema/mvc/spring-mvc.xsd</span>
        <span class="err">http://www.springframework.org/schema/context</span> 
        <span class="err">http://www.springframework.org/schema/context/spring-context.xsd</span>		
        <span class="err">http://www.springframework.org/schema/aop</span>
		<span class="err">http://www.springframework.org/schema/aop/spring-aop.xsd</span>
		<span class="err">http://www.springframework.org/schema/tx</span>
		<span class="err">http://www.springframework.org/schema/tx/spring-tx.xsd"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/beans&gt;</span>
</code></pre>
</div>

<h3 id="configure-handlermapping">Configure HandlerMapping</h3>

<p>In springmvc.xml before, use this between beans to create an object for its class.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;bean class="org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping"&gt;&lt;/bean&gt;
</code></pre>
</div>

<h3 id="write-usercontroller-implementing-controller">Write UserController implementing Controller</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>public class UserController implements Controller{
	@Override
	public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception {
		// TODO Auto-generated method stub
		ModelAndView mv=new ModelAndView();
		mv.addObject("user", "Tom");
		//Set physical view
		mv.setViewName("/WEB-INF/index.jsp");
		return mv;
	}
}
</code></pre>
</div>

<h3 id="create-an-object-for-controller-using-spring">Create an object for controller using Spring</h3>

<p>In springmvc.xml, add this between beans.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;bean id="userController" name="/index.do" class="com.huhang.controller.UserController"&gt;&lt;/bean&gt;
</code></pre>
</div>

<blockquote>
  <p>Note that distributed systems need <code class="highlighter-rouge">id</code>.</p>
</blockquote>

<h3 id="configure-handleradapter-which-executes-userhandler">Configure HandlerAdapter which executes UserHandler</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;bean class="org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter"&gt;&lt;/bean&gt;
</code></pre>
</div>

<h3 id="create-physical-view-in-web-inf">Create physical view in WEB-INF</h3>

<p>index.jsp:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;body&gt;
&lt;h1&gt;${user}&lt;/h1&gt;
&lt;/body&gt;
</code></pre>
</div>

<h3 id="logical-view-instead-of-physical-view">Logical view instead of physical view</h3>

<div class="highlighter-rouge"><pre class="highlight"><code>//set logical view
mv.setViewName("index");
</code></pre>
</div>

<p>And ViewResolver is needed in springmvc.xml.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;
	&lt;property name="prefix" value="/WEB-INF/"&gt;&lt;/property&gt;
	&lt;property name="suffix" value=".jsp"&gt;&lt;/property&gt;
&lt;/bean&gt;
</code></pre>
</div>

<p>Then the logical view consists of <code class="highlighter-rouge">prefix+logical view+suffix</code>, which is <code class="highlighter-rouge">/WEB-INF/index.jsp</code>, the same as physical view written before.</p>
